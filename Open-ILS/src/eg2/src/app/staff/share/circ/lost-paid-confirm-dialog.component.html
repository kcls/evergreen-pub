<ng-template #dialogContent>
  <div class="modal-header bg-info">
    <h4>
      <strong i18n>Confirm Checkin of Lost &amp; Paid Item</strong>
    </h4>
    <button type="button" class="close"
      i18n-aria-label aria-label="Close" (click)="close()">
      <span aria-hidden="true">&times;</span>
    </button>
  </div>
  <div class="modal-body form-validated">
    <div class="row p-2 mt-1" *ngIf="checkinResult.record">
      <div class="col-lg-4 font-weight-bold" i18n>Title:</div>
      <div class="col-lg-8">
        <a target="_blank" 
          routerLink="/staff/catalog/record/{{checkinResult.record.doc_id()}}">
          {{checkinResult.record.title()}}
        </a>
      </div>
    </div>
    <div class="row p-2 mt-1 border-bottom">
      <div class="col-lg-4" i18n>
        <label for="patron-name" class="font-weight-bold">Patron</label>
      </div>
      <div class="col-lg-8">
        <a target="_blank" id="patron-name"
          routerLink="/staff/circ/patron/{{checkinResult.patron.id()}}/checkout">
          {{checkinResult.patron.family_name()}},
          {{checkinResult.patron.first_given_name()}}
          {{checkinResult.patron.second_given_name()}}
        </a>
      </div>
    </div>
    <div class="row p-2 mt-1">
      <div class="col-lg-4 font-weight-bold" i18n>Checked Out:</div>
      <div class="col-lg-8">{{checkinResult.circ.xact_start() | egDateTime}}</div>
    </div>
    <div class="row p-2 mt-1">
      <div class="col-lg-4 font-weight-bold" i18n>Marked Lost:</div>
      <div class="col-lg-8">{{checkinResult.circ.stop_fines_time() | egDateTime}}</div>
    </div>
    <div class="row p-2 mt-1">
      <div class="col-lg-4">
        <label class="font-weight-bold" for="condition-select" i18n>
          Is item in circulating condition?
        </label>
      </div>
      <div class="col-lg-3">
        <select id="condition-select" name="condition-select" 
          class="form-control" [required]="true" [(ngModel)]="itemCondition">
          <option value="" disabled i18n>Select...</option>
          <option value="good" i18n>Yes</option>
          <option value="bad" i18n>No</option>
        </select>
      </div>
    </div>
    <div class="row p-2 mt-1" *ngIf="itemCondition === 'bad'">
      <div class="col-lg-12">
        <div class="alert alert-secondary" i18n>
          This item will be set to Discard/Weed status.
        </div>
      </div>
    </div>

    <div class="row p-2 mt-1">
      <div class="col-lg-4">
        <label class="font-weight-bold" for="note-dibs" i18n>Staff Initials</label>
      </div>
      <div class="col-lg-3">
        <input type="text" class="form-control" [(ngModel)]="initials" id="dibs-input"
          [required]="true" i18n-placeholder placeholder="Initials..."/>
      </div>
    </div>

    <div class="row p-2 mt-1">
      <div class="col-lg-12">
        <div class="alert alert-secondary">
          <ng-container 
            *ngIf="checkinResult.firstEvent.is_refundable && itemCondition === 'good'" i18n>
            This item is eligible for refund.  Checking the item in will 
            initiate the refund process.
          </ng-container>
          <ng-container *ngIf="!checkinResult.firstEvent.is_refundable" i18n>
            This item is <u>not</u> eligible for refund.  If checking
            the item in results in a negative transaction balance, the
            balance will be automatically zero'ed.
          </ng-container>
        </div>
      </div>
    </div>

    <div class="row p-2 mt-1" *ngIf="processing">
      <eg-progress-inline></eg-progress-inline>
    </div>

  </div>
  <div class="modal-footer">
    <button type="button" class="btn btn-warning" (click)="close()" i18n>Cancel Checkin</button>
    <button type="button" class="btn btn-success" (click)="checkin()" i18n>Resume Checkin</button>
  </div>
</ng-template>


