
<!-- set linear to true for go-live -->
<mat-stepper orientation="vertical" [linear]="false" #stepper>

  <mat-step [stepControl]="cardDesignGroup">
    <form [formGroup]="cardDesignGroup">
      <ng-template matStepLabel i18n>Choose a Card</ng-template>

      <p class="mt-1 mb-1" i18n>You'll receive one wallet-size and one keychain-size card.</p>

      <mat-radio-group formControlName="design">
        <div>
          <mat-radio-button value="2019_Dog_Combo">
            <img class="card-image-horiz" src="/images/patron_cards/2019_Dog_Combo.png"/>
          </mat-radio-button>
          <mat-radio-button value="2018_Pride_Combo">
            <img class="card-image-horiz" src="/images/patron_cards/2018_Pride_Combo.png"/>
          </mat-radio-button>
        </div>
        <div class="mt-3">
          <mat-radio-button value="2019_Sasquatch_Combo">
            <img class="card-image-vert " src="/images/patron_cards/2019_Sasquatch_Combo.png"/>
          </mat-radio-button>
          <mat-radio-button value="2019_Red_Combo">
            <img class="card-image-vert " src="/images/patron_cards/2019_Red_Combo.png"/>
          </mat-radio-button>
        </div>
        <div class="mt-3">
          <mat-radio-button value="2018_Slug">
            <img class="card-image-vert" src="/images/patron_cards/2018_Slug.png"/>
          </mat-radio-button>
          <mat-radio-button value="2021_Baby_Yoda">
            <img class="card-image-vert" src="/images/patron_cards/2021_Baby_Yoda.png"/>
          </mat-radio-button>
        </div>
      </mat-radio-group>

      <div class="border border-slate-300 rounded mt-4">
        <button mat-button matStepperNext>Next</button>
      </div>
    </form>
  </mat-step>

  <mat-step [stepControl]="cardDeliveryGroup">
    <form [formGroup]="cardDeliveryGroup">
      <ng-template matStepLabel i18n>Choose How To Get Your Card</ng-template>
      <mat-radio-group formControlName="delivery">
        <mat-radio-button value="Mail">
          <span i18n>Mail my card.  
            <span class="italic text-sm">
              (You’ll receive your card and activation instructions within 1-2 weeks.)
            </span>
          </span>
        </mat-radio-button>
        <mat-radio-button value="Pick up">
          <span i18n> I will pick up at my home library
            <span class="italic text-sm">(Available same day.)</span>
          </span>
        </mat-radio-button>
      </mat-radio-group>
      <div class="border border-slate-300 rounded mt-4">
        <button mat-button matStepperPrevious>Back</button>
        <button mat-button matStepperNext>Next</button>
      </div>
    </form>
  </mat-step>

  <mat-step [stepControl]="nameGroup">
    <form [formGroup]="nameGroup">
      <ng-template matStepLabel i18n>Tell Us About You</ng-template>

      <h3 class="mt-4" i18n>Name</h3>

      <div class="columns-2 mt-4">
        <div>
          <mat-form-field class="w-full">
            <mat-label i18n>First Name</mat-label>
            <input type="text" matInput formControlName="first"/>
            <mat-error *ngIf="nameGroup.controls.first.hasError('required')" i18n>
                First Name <strong>required</strong>
            </mat-error>
          </mat-form-field>
        </div>
        <div>
          <mat-form-field class="w-full pl-2">
            <mat-label i18n>Middle Name</mat-label>
            <input type="text" matInput formControlName="middle"/>
          </mat-form-field>
        </div>
      </div>
      <div class="columns-2 mt-4">
        <div>
          <mat-form-field class="w-full">
            <mat-label i18n>Last Name</mat-label>
            <input type="text" matInput formControlName="last"/>
            <mat-error *ngIf="nameGroup.controls.last.hasError('required')" i18n>
                Last Name <strong>required</strong>
            </mat-error>
          </mat-form-field>
        </div>
      </div>

      <h4 class="mt-4" i18n>Legal Name</h4>

      <mat-checkbox formControlName="legalIsSame">
        Same as above; uncheck to submit a legal name that appears on valid photo ID.
      </mat-checkbox>

      <div class="mt-4" *ngIf="!nameGroup.controls.legalIsSame.value">
        <div class="columns-2 mt-4">
          <div>
            <mat-form-field class="w-full">
              <mat-label i18n>Legal First Name</mat-label>
              <input type="text" matInput formControlName="legalFirst"/>
            </mat-form-field>
          </div>
          <div>
            <mat-form-field class="w-full pl-2">
              <mat-label i18n>Legal Middle Name</mat-label>
              <input type="text" matInput formControlName="legalMiddle"/>
            </mat-form-field>
          </div>
        </div>
        <div class="columns-2 mt-4">
          <div>
            <mat-form-field class="w-full">
              <mat-label i18n>Legal Last Name</mat-label>
              <input type="text" matInput formControlName="legalLast"/>
            </mat-form-field>
          </div>
        </div>
      </div>

      <h4 class="mt-4" i18n>Date of Birth</h4>

      <div class="columns-2 mt-4">
        <div>
          <mat-form-field class="w-full">
            <mat-label i18n>Birth Date</mat-label>
            <input matInput [matDatepicker]="dobPicker" formControlName="dob" [max]="maxDob" [min]="minDob"/>
            <mat-hint>MM/DD/YYYY</mat-hint>
            <mat-datepicker-toggle matIconSuffix [for]="dobPicker"></mat-datepicker-toggle>
            <mat-datepicker #dobPicker></mat-datepicker>
            <mat-error *ngIf="nameGroup.controls.dob.hasError('required')" i18n>
                Birth Date <strong>required</strong>
            </mat-error>
          </mat-form-field>
        </div>
      </div>

      <div class="mt-4" *ngIf="isJuvenile">
        <p i18n>If you’re younger than age 18, list the names of all 
          parents and guardians who live with you.</p>

        <div class="columns-2 mt-4">
          <div>
            <mat-form-field class="w-full">
              <mat-label i18n>Parent or Guardian</mat-label>
              <input type="text" matInput formControlName="guardian"/>
              <mat-error *ngIf="nameGroup.controls.guardian.hasError('required')" i18n>
                  Parent or Guardian <strong>required</strong>
              </mat-error>
            </mat-form-field>
          </div>
        </div>
      </div>

      <div class="border border-slate-300 rounded mt-4">
        <button mat-button matStepperPrevious>Back</button>
        <button mat-button matStepperNext>Next</button>
      </div>
    </form>
  </mat-step>

  <mat-step [stepControl]="contactsGroup">
    <form [formGroup]="contactsGroup">
      <ng-template matStepLabel i18n>Contact Information</ng-template>
    </form>
    <!-- phone, email, home lib, prefs -->
  </mat-step>

  <mat-step [stepControl]="addressGroup">
    <form [formGroup]="addressGroup">
      <ng-template matStepLabel i18n>Address</ng-template>
    </form>
    <!-- residential address; maybe mailing -->
  </mat-step>

  <mat-step [stepControl]="submitGroup">
    <ng-template matStepLabel i18n>Submit Form</ng-template>
  </mat-step>


</mat-stepper>
