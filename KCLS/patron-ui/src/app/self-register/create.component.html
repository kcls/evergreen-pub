<form [formGroup]="formGroup">
  <h2 i18n>Card Options</h2>

  <p class="mt-1 mb-2" i18n>You'll receive one wallet-size and one keychain-size card.</p>

  <mat-radio-group i18n-aria-label aria-label="Card Design" formControlName="design">
    <div>
      <mat-radio-button value="2019_Dog_Combo" i18n-aria-label aria-label="Dog">
        <img class="card-image-horiz" src="/images/patron_cards/2019_Dog_Combo.png" i18n-alt alt="Dog"/>
      </mat-radio-button>
      <mat-radio-button value="2018_Pride_Combo" i18n-aria-label aria-label="Pride">
        <img class="card-image-horiz" src="/images/patron_cards/2018_Pride_Combo.png" i18n-alt alt="Pride"/>
      </mat-radio-button>
    </div>
    <div class="mt-3">
      <mat-radio-button value="2019_Sasquatch_Combo" i18n-aria-label aria-label="Sasquatch">
        <img class="card-image-vert " src="/images/patron_cards/2019_Sasquatch_Combo.png" i18n-alt alt="Sasquatch"/>
      </mat-radio-button>
      <mat-radio-button value="2019_Red_Combo" i18n-aria-label aria-label="Red">
        <img class="card-image-vert " src="/images/patron_cards/2019_Red_Combo.png" i18n-alt alt="Red"/>
      </mat-radio-button>
    </div>
    <div class="mt-3">
      <mat-radio-button value="2018_Slug" i18n-aria-label aria-label="Slug">
        <img class="card-image-vert" src="/images/patron_cards/2018_Slug.png" i18n-alt alt="Slug"/>
      </mat-radio-button>
      <mat-radio-button value="2021_Baby_Yoda" i18n-aria-label aria-label="Baby Yoda">
        <img class="card-image-vert" src="/images/patron_cards/2021_Baby_Yoda.png" i18n-alt alt="Baby Yoda"/>
      </mat-radio-button>
    </div>
  </mat-radio-group>

  <p class="mt-1 mb-2" i18n>Some libraries may have additional library card selections.</p>

  <h3 i18n>Choose How To Receive Your Card</h3>

  <mat-radio-group formControlName="delivery">
    <mat-radio-button value="Mail">
      <span i18n>Mail my card.  
        <span class="italic text-sm">
          (You’ll receive your card and activation instructions within 1-2 weeks.)
        </span>
      </span>
    </mat-radio-button>
    <mat-radio-button value="Pick up">
      <span i18n> I will pick up at my home library
        <span class="italic text-sm">(Available same day.)</span>
      </span>
    </mat-radio-button>
  </mat-radio-group>

  <h2 i18n>Your Information</h2>
  <hr/>

  <h3 i18n>Enter Your Name</h3>

  <div class="columns-2 mt-6">
    <div>
      <mat-form-field class="w-full">
        <mat-label i18n>First Name</mat-label>
        <input type="text" matInput formControlName="first"/>
        <mat-error *ngIf="formGroup.controls.first.hasError('required')" i18n>
            First Name <strong>required</strong>
        </mat-error>
      </mat-form-field>
    </div>
    <div>
      <mat-form-field class="w-full pl-2">
        <mat-label i18n>Middle Name</mat-label>
        <input type="text" matInput formControlName="middle"/>
      </mat-form-field>
    </div>
  </div>

  <div class="columns-2 mt-4">
    <div>
      <mat-form-field class="w-full">
        <mat-label i18n>Last Name</mat-label>
        <input type="text" matInput formControlName="last"/>
        <mat-error *ngIf="formGroup.controls.last.hasError('required')" i18n>
            Last Name <strong>required</strong>
        </mat-error>
      </mat-form-field>
    </div>
  </div>

  <h3 i18n>Legal Name</h3>

  <mat-checkbox formControlName="legalIsSame">
    Same as above; uncheck to submit a legal name that appears on valid photo ID.
  </mat-checkbox>

  <div class="mt-6" *ngIf="!formGroup.controls.legalIsSame.value">
    <div class="columns-2 mt-4">
      <div>
        <mat-form-field class="w-full">
          <mat-label i18n>Legal First Name</mat-label>
          <input type="text" matInput formControlName="legalFirst"/>
        </mat-form-field>
      </div>
      <div>
        <mat-form-field class="w-full pl-2">
          <mat-label i18n>Legal Middle Name</mat-label>
          <input type="text" matInput formControlName="legalMiddle"/>
        </mat-form-field>
      </div>
    </div>
    <div class="columns-2 mt-4">
      <div>
        <mat-form-field class="w-full">
          <mat-label i18n>Legal Last Name</mat-label>
          <input type="text" matInput formControlName="legalLast"/>
        </mat-form-field>
      </div>
    </div>
  </div>

  <div class="columns-2 mt-6">
    <div>
      <mat-form-field class="w-full">
        <mat-label i18n>Birth Date</mat-label>
        <input matInput [matDatepicker]="dobPicker" formControlName="dob" [max]="maxDob" [min]="minDob"/>
        <mat-hint>MM/DD/YYYY</mat-hint>
        <mat-datepicker-toggle matIconSuffix [for]="dobPicker"></mat-datepicker-toggle>
        <mat-datepicker #dobPicker></mat-datepicker>
        <mat-error *ngIf="formGroup.controls.dob.hasError('required')" i18n>
            Birth Date <strong>required</strong>
        </mat-error>
      </mat-form-field>
    </div>
  </div>

  <div class="mt-6" *ngIf="isJuvenile">
    <p i18n>If you’re younger than age 18, list the names of all 
      parents and guardians who live with you.</p>

    <div class="columns-1 mt-6">
      <div>
        <mat-form-field class="w-full">
          <mat-label i18n>Parent or Guardian</mat-label>
          <input type="text" matInput formControlName="guardian"/>
          <mat-error *ngIf="formGroup.controls.guardian.hasError('required')" i18n>
              Parent or Guardian <strong>required</strong>
          </mat-error>
        </mat-form-field>
      </div>
    </div>
  </div>

  <div class="columns-2 mt-6">
    <div>
      <mat-form-field class="w-full">
        <mat-label i18n>Phone Number</mat-label>
        <input type="tel" matInput formControlName="phone"/>
        <mat-hint>111-222-3333</mat-hint>
        <mat-error *ngIf="formGroup.controls.phone.hasError('required')" i18n>
            Phone Number <strong>required</strong>
        </mat-error>
        <mat-error *ngIf="formGroup.controls.phone.hasError('pattern')" i18n>
            Phone format is <strong>111-222-3333</strong>
        </mat-error>
      </mat-form-field>
    </div>
  </div>

  <div class="columns-2 mt-6">
    <div>
      <mat-form-field class="w-full">
        <mat-label i18n>Email Address</mat-label>
        <input type="email" matInput formControlName="email"/>
        <mat-hint>user&#64;example.org</mat-hint>
        <mat-error *ngIf="formGroup.controls.email.hasError('email')" i18n>
            Email format is <strong>not valid</strong>
        </mat-error>
      </mat-form-field>
    </div>
  </div>

  <h2 i18n>Contact Preferences</h2>
  <hr/>

  <div class="columns-1 mt-6">
    <div class="w-full">
      <h3 i18n>May we contact you?</h3>
      <div class="pl-4">
        <mat-checkbox formControlName="wantsLibNews" i18n>
          Tell me about library news and events
        </mat-checkbox>
        <mat-checkbox formControlName="wantsFoundationInfo" i18n>
          Send me information about supporting the King County Library System Foundation.
        </mat-checkbox>
      </div>
    </div>
  </div>

  <h3 i18n>Residential Address</h3>

  <div class="columns-1 mt-6">
    <div>
      <mat-form-field class="w-full">
        <mat-label i18n>Street Address</mat-label>
        <input type="text" matInput formControlName="street1"/>
        <mat-error *ngIf="formGroup.controls.email.hasError('required')" i18n>
            Street address is <strong>required</strong>
        </mat-error>
      </mat-form-field>
    </div>
  </div>

  <div class="columns-2 mt-4">
    <div>
      <mat-form-field class="w-full">
        <mat-label i18n>Apartment or Unit</mat-label>
        <input type="text" matInput formControlName="street2"/>
      </mat-form-field>
    </div>
    <div>
      <mat-form-field class="w-full">
        <mat-label i18n>City</mat-label>
        <input type="text" matInput formControlName="city"/>
        <mat-error *ngIf="formGroup.controls.email.hasError('required')" i18n>
            City is <strong>required</strong>
        </mat-error>
      </mat-form-field>
    </div>
  </div>

  <div class="columns-2 mt-4">
    <div>
      <mat-form-field class="w-full">
        <mat-label i18n>State</mat-label>
        <mat-select formControlName="state" [value]="formGroup.controls.state.value">
          <mat-option *ngFor="let state of states" [value]="state">{{state}}</mat-option>
        </mat-select>
        <mat-error *ngIf="formGroup.controls.state.hasError('required')" i18n>
            State is <strong>required</strong>
        </mat-error>
      </mat-form-field>
    </div>
    <div>
      <mat-form-field class="w-full">
        <mat-label i18n>Zip Code</mat-label>
        <input type="text" matInput formControlName="zipCode"/>
        <mat-error *ngIf="formGroup.controls.zipCode.hasError('required')" i18n>
            Zip Code is <strong>required</strong>
        </mat-error>
        <mat-error *ngIf="formGroup.controls.zipCode.hasError('pattern')" i18n>
            Zip  Code format is <strong>12345</strong>
        </mat-error>
      </mat-form-field>
    </div>
  </div>

  <h3 i18n>Mailing Address</h3>

  <div class="columns-1 mt-6">
    <mat-checkbox formControlName="mailingIsSame">
      Same as Residential Address
    </mat-checkbox>
  </div>

  <ng-container *ngIf="!formGroup.controls.mailingIsSame.value">
    <div class="columns-1 mt-6">
      <div>
        <mat-form-field class="w-full">
          <mat-label i18n>Street Address</mat-label>
          <input type="text" matInput formControlName="mailingStreet1"/>
          <mat-error *ngIf="formGroup.controls.email.hasError('required')" i18n>
              Street address is <strong>required</strong>
          </mat-error>
        </mat-form-field>
      </div>
    </div>

    <div class="columns-2 mt-4">
      <div>
        <mat-form-field class="w-full">
          <mat-label i18n>Apartment or Unit</mat-label>
          <input type="text" matInput formControlName="mailingStreet2"/>
        </mat-form-field>
      </div>
      <div>
        <mat-form-field class="w-full">
          <mat-label i18n>City</mat-label>
          <input type="text" matInput formControlName="mailingCity"/>
          <mat-error *ngIf="formGroup.controls.email.hasError('required')" i18n>
              City is <strong>required</strong>
          </mat-error>
        </mat-form-field>
      </div>
    </div>

    <div class="columns-2 mt-4">
      <div>
        <mat-form-field class="w-full">
          <mat-label i18n>State</mat-label>
          <mat-select formControlName="mailingState">
            <mat-option *ngFor="let state of states" [value]="state">{{state}}</mat-option>
          </mat-select>
          <mat-error *ngIf="formGroup.controls.state.hasError('required')" i18n>
              State is <strong>required</strong>
          </mat-error>
        </mat-form-field>
      </div>
      <div>
        <mat-form-field class="w-full">
          <mat-label i18n>Zip Code</mat-label>
          <input type="text" matInput formControlName="mailingZipCode"/>
          <mat-error *ngIf="formGroup.controls.zipCode.hasError('required')" i18n>
              Zip Code is <strong>required</strong>
          </mat-error>
          <mat-error *ngIf="formGroup.controls.zipCode.hasError('pattern')" i18n>
              Zip  Code format is <strong>12345</strong>
          </mat-error>
        </mat-form-field>
      </div>
    </div>

  </ng-container>

  <div class="columns-1 mt-6">
    <div>
      <mat-checkbox formControlName="termsOfService" i18n>
        I assume full responsibility for the use of this card and all 
        charges associated with its use. I will give immediate notice of 
        loss of card or change of address.
      </mat-checkbox>
    </div>
  </div>

  <div class="columns-1 mt-6">
    <button mat-raised-button [disabled]="!canSubmit()" (click)="submit()" i18n>Apply</button>
    <button mat-raised-button (click)="cancel()" class="ml-4" i18n>Cancel</button>
  </div>

</form>


